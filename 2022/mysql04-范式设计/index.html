<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>【MySQL】04 - 范式设计 | XuShun's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=Description content="XuShun的个人博客，记录学习和生活。"><link rel=prev href=https://xushun1221.github.io/2022/mysql05-%E5%9F%BA%E7%A1%80crud%E6%93%8D%E4%BD%9C/><link rel=next href=https://xushun1221.github.io/2022/mysql06-%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/><link rel=canonical href=https://xushun1221.github.io/2022/mysql04-%E8%8C%83%E5%BC%8F%E8%AE%BE%E8%AE%A1/><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary"><meta name=twitter:title content="【MySQL】04 - 范式设计"><meta name=twitter:description content="关系型数据库范式设计 范式设计使用简洁的表述，描述了在数据库设计时需要遵循的一些原则。 使用数据库范式可以带来许多好处，最重要的有三点： 减少数据"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"【MySQL】04 - 范式设计","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/xushun1221.github.io\/2022\/mysql04-%E8%8C%83%E5%BC%8F%E8%AE%BE%E8%AE%A1\/"},"image":{"@type":"ImageObject","url":"https:\/\/xushun1221.github.io\/cover.png","width":800,"height":600},"genre":"posts","keywords":"datebase, MySQL","wordcount":1551,"url":"https:\/\/xushun1221.github.io\/2022\/mysql04-%E8%8C%83%E5%BC%8F%E8%AE%BE%E8%AE%A1\/","datePublished":"2022-10-13T00:00:00\x2b00:00","dateModified":"2022-10-13T00:00:00\x2b00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"xushun","logo":{"@type":"ImageObject","url":"https:\/\/xushun1221.github.io\/logo.png","width":127,"height":40}},"description":""}</script><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/css/lib/fontawesome-free/all.min.css></head><body><script>window.isDark=(window.localStorage&&window.localStorage.getItem('theme'))==='dark';window.isDark&&document.body.classList.add('dark-theme');</script><div class=wrapper><nav class=navbar><div class=top-scroll-bar></div><div class=navbar-container><div class="navbar-header animated bounceIn"><a href=https://xushun1221.github.io>XuShun's Blog</a></div><div class=navbar-menu><a class=menu-item href=https://xushun1221.github.io/posts>Posts</a><a class=menu-item href=https://xushun1221.github.io/tags>Tags</a><a class=menu-item href=https://xushun1221.github.io/categories>Categories</a><a class=menu-item href=https://xushun1221.github.io/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></nav><nav class=navbar-mobile><div class=top-scroll-bar></div><div class=navbar-container><div class=navbar-header><div class="navbar-header-title animated bounceIn"><a href=https://xushun1221.github.io>XuShun's Blog</a></div><div class=menu-toggle id=menu-toggle><span></span><span></span><span></span></div></div><div class=navbar-menu id=mobile-menu><a class=menu-item href=https://xushun1221.github.io/posts>Posts</a><a class=menu-item href=https://xushun1221.github.io/tags>Tags</a><a class=menu-item href=https://xushun1221.github.io/categories>Categories</a><a class=menu-item href=https://xushun1221.github.io/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></nav><main class=main><div class=container><article class=page><h1 class="post-title animated flipInX">【MySQL】04 - 范式设计</h1><div class=post-meta><i class="far fa-calendar-alt fa-fw"></i>published on&nbsp;<time datetime=2022-10-13>2022-10-13</time>&nbsp;
<i class="fas fa-pencil-alt fa-fw"></i>about 1551 words&nbsp;<span class=post-category><i class="far fa-folder fa-fw"></i>included in&nbsp;<a href=https://xushun1221.github.io/categories/datebase/>Date base</a>&nbsp;</span></div><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#关系型数据库范式设计>关系型数据库范式设计</a></li><li><a href=#第一范式-1nf>第一范式 1NF</a></li><li><a href=#第二范式-2nf>第二范式 2NF</a></li><li><a href=#第三范式>第三范式</a></li><li><a href=#bc范式>BC范式</a></li><li><a href=#第四范式>第四范式</a></li><li><a href=#总结>总结</a></li></ul></nav></div></div><div class=post-toc-mobile id=post-toc-mobile><details><summary><div class=post-toc-title><span>Contents</span>
<span><i class="details icon fas fa-angle-down"></i></span></div></summary><div class=post-toc-content><nav id=TableOfContentsMobile><ul><li><a href=#关系型数据库范式设计>关系型数据库范式设计</a></li><li><a href=#第一范式-1nf>第一范式 1NF</a></li><li><a href=#第二范式-2nf>第二范式 2NF</a></li><li><a href=#第三范式>第三范式</a></li><li><a href=#bc范式>BC范式</a></li><li><a href=#第四范式>第四范式</a></li><li><a href=#总结>总结</a></li></ul></nav></div></details></div><div class=post-content><a class=post-dummy-target id=关系型数据库范式设计></a><h2>关系型数据库范式设计</h2><p>范式设计使用简洁的表述，描述了在数据库设计时需要遵循的一些原则。</p><p>使用数据库范式可以带来许多好处，最重要的有三点：</p><ol><li>减少数据冗余（最主要的好处，其他两点由此附带的）</li><li>消除异常（插入异常、更新异常、删除异常）</li><li>让数据组织更加和谐</li></ol><blockquote><p>数据库范式不是越高越好，范式越高，意味着表越多，多表联合查询的几率就变大，SQL的效率就低了。</p></blockquote><a class=post-dummy-target id=第一范式-1nf></a><h2>第一范式 1NF</h2><blockquote><p>每一列都要保持原子特性（不能再拆分）。</p></blockquote><p>列都是基本的数据项，不能够再进行分割，否则需要设计成一对多的实体关系。如下图，应该将地址字段分为更详细的三个字段，不能使用另一张表，这样通过单表查询就能找到想要的数据。</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=/post_images/posts/Database/MySQL/%e7%ac%ac%e4%b8%80%e8%8c%83%e5%bc%8f.jpg alt title=第一范式 class=lazyload><figcaption class=image-caption>第一范式</figcaption></figure></p><p>注意，不符合第一范式的不能称作关系型数据库。</p><a class=post-dummy-target id=第二范式-2nf></a><h2>第二范式 2NF</h2><blockquote><p>属性完全依赖于主键 - 主要针对联合主键。</p></blockquote><p>非主属性完全依赖于主关键字（非主属性应该完全依赖联合主键的每一个字段），如果不是完全依赖主键，应该拆分为新的实体，设计为一对多的实体关系。</p><p>例如这个选课表，<code>selectcourse(学号,姓名,年龄,课程名称,成绩,学分)</code>，<code>(学号,课程名称)</code>是联合主键。</p><p>姓名、年龄和课程名称无关，学分之和课程名称有关，和学号无关。不满足第二范式，分析：</p><ul><li>不同学生可以选择相同的课程，而课程的学分不会因为选课人的不同而改变，使用上面的表设计，必然导致学分存储冗余；</li><li>同一个学生可以选多个课程，而学生的姓名和年龄是不会变的，那么姓名和年龄也存在冗余。</li></ul><p>学生和课程之间的关系，应该为多对多。所以，我们使用学生表（学号，姓名，年龄）、课程表（课程id，课程名，学分）、选课表（学号，课程id，成绩），这三张表来实现。</p><p>另一个例子，如下图，人员姓名、住址等信息不依赖于联合主键中的部门名称，所以部门的相关信息应该拆分出来。</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=/post_images/posts/Database/MySQL/%e7%ac%ac%e4%ba%8c%e8%8c%83%e5%bc%8f.jpg alt title=第二范式 class=lazyload><figcaption class=image-caption>第二范式</figcaption></figure></p><a class=post-dummy-target id=第三范式></a><h2>第三范式</h2><blockquote><p>属性不依赖于其他非主属性。</p></blockquote><p>一个数据库表中不能包含已经再其他表中包含的非主关键字信息。</p><p>例如，学生关系表<code>student(学号,姓名,年龄,所在学院,学院地点,学院电话)</code>，学号是主键。</p><p>学院地点、学院电话并不依赖于主键学号，而是依赖于所在学院，所以该表不满足第三范式。应该将学院专门设计为一张表，学生和学院是一对多的关系。</p><p>另一个例子，如下图，员工的工作描述，并不依赖于员工号，而是依赖于员工的工作职位job，所以不满足第三范式，需要将job单独使用一张表，员工表中存job即可。</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=/post_images/posts/Database/MySQL/%e7%ac%ac%e4%b8%89%e8%8c%83%e5%bc%8f.jpg alt title=第三范式 class=lazyload><figcaption class=image-caption>第三范式</figcaption></figure></p><blockquote><p>注意，这里的冗余并不一定需要被杜绝，符合第三范式意味着要使用多表，在多表查询时导致性能降低，有时可能会允许一定的冗余存在，以提高查询效率。</p></blockquote><blockquote><p>一般的关系型数据库满足第三范式即可，更高级的范式可能导致性能损耗高于范式带来的收益，需要仔细衡量。</p></blockquote><a class=post-dummy-target id=bc范式></a><h2>BC范式</h2><blockquote><p>每个表中只有一个候选键。</p></blockquote><p>简单的说，BC范式时第三范式基础上的一种特殊情况，即每个表中只有一个候选键（表中每行的值都不相同，称为候选键），也就是说，BC范式要求表中，除主键外，不能有其他属性是候选键。</p><p>如下图，noNF表中，每个员工的email都是唯一的，不可能两个人有相同的email，所以不符合BC范式，需要将email拆分到另一张表。</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=/post_images/posts/Database/MySQL/BC%e8%8c%83%e5%bc%8f.jpg alt title=BC范式 class=lazyload><figcaption class=image-caption>BC范式</figcaption></figure></p><a class=post-dummy-target id=第四范式></a><h2>第四范式</h2><blockquote><p>消除表中的多值依赖。</p></blockquote><p>简单来说，就是是消除表中的多值依赖，也就是说可以减少维护数据一致性的工作。</p><p>如下图，noNF表中skill这个字段，有的人是<code>java,mysql</code>，有的人是<code>java,MySQL</code>，这样数据就不一致了，解决方法是将多值属性放入一个新表。</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=/post_images/posts/Database/MySQL/%e7%ac%ac%e5%9b%9b%e8%8c%83%e5%bc%8f.jpg alt title=第四范式 class=lazyload><figcaption class=image-caption>第四范式</figcaption></figure></p><p>这里的skill表是这样：</p><table><thead><tr><th>skill</th><th>employeeID</th></tr></thead><tbody><tr><td>C++</td><td>1020</td></tr><tr><td>MySQL</td><td>1020</td></tr><tr><td>C++</td><td>2010</td></tr><tr><td>JAVA</td><td>2010</td></tr><tr><td>GOlang</td><td>1020</td></tr></tbody></table><a class=post-dummy-target id=总结></a><h2>总结</h2><p>不难看出，应用的范式越高，表越多，也会带来一些问题：</p><ol><li>查询时需要连接多个表，增加了SQL查询的复杂度</li><li>查询时需要连接多个表，降低了数据库查询性能</li></ol><p>因此，范式不是越高越好，应该视情况而定。第三范式已经很大程度上减少了数据冗余，并且基本预防了数据插入异常、更新异常和删除异常了。</p></div><div class=post-copyright id=post-footer><p class=copyright-item><span>Author:&nbsp;</span>
<span>xushun</span></p><p class=copyright-item><span>Updated on:&nbsp;</span>
<span>2022-10-13</span></p><p class=copyright-item><span>Share on:&nbsp;</span>
<span><a href="//twitter.com/share?url=https%3a%2f%2fxushun1221.github.io%2f2022%2fmysql04-%25E8%258C%2583%25E5%25BC%258F%25E8%25AE%25BE%25E8%25AE%25A1%2f&text=%e3%80%90MySQL%e3%80%9104%20-%20%e8%8c%83%e5%bc%8f%e8%ae%be%e8%ae%a1&via=" target=_blank title="Share on Twitter"><i class="fab fa-twitter fa-fw"></i></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fxushun1221.github.io%2f2022%2fmysql04-%25E8%258C%2583%25E5%25BC%258F%25E8%25AE%25BE%25E8%25AE%25A1%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook-square fa-fw"></i></a><a href="//reddit.com/submit?url=https%3a%2f%2fxushun1221.github.io%2f2022%2fmysql04-%25E8%258C%2583%25E5%25BC%258F%25E8%25AE%25BE%25E8%25AE%25A1%2f&title=%e3%80%90MySQL%e3%80%9104%20-%20%e8%8c%83%e5%bc%8f%e8%ae%be%e8%ae%a1" target=_blank title="Share on Reddit"><i class="fab fa-reddit fa-fw"></i></a></span></p><p class=copyright-item></p><p class=copyright-item></p></div><br><div class=post-info-more><section><span class=tag><a href=https://xushun1221.github.io/tags/datebase/><i class="fas fa-tag fa-fw"></i>&nbsp;datebase</a>&nbsp;
</span><span class=tag><a href=https://xushun1221.github.io/tags/mysql/><i class="fas fa-tag fa-fw"></i>&nbsp;MySQL</a>&nbsp;</span></section><section><span><a href=javascript:window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=https://xushun1221.github.io>Home</a></span></section></div><div class=post-nav><a href=https://xushun1221.github.io/2022/mysql05-%E5%9F%BA%E7%A1%80crud%E6%93%8D%E4%BD%9C/ class=prev rel=prev title="【MySQL】05 - 基础CRUD操作"><i class="fas fa-angle-left fa-fw"></i>【MySQL】05 - 基础CRUD操作</a>
<a href=https://xushun1221.github.io/2022/mysql06-%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/ class=next rel=next title="【MySQL】06 - 单表查询常用操作">【MySQL】06 - 单表查询常用操作<i class="fas fa-angle-right fa-fw"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright><div class=copyright-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2022 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://xushun1221.github.io/about/ target=_blank>xushun</a> | </span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreffer">Hugo</a> & <a href=https://github.com/dillonzq/LoveIt target=_blank rel="external nofollow noopener noreffer">LoveIt</a></div></div></footer></div><a href=# class=dynamic-to-top id=dynamic-to-top data-scroll><span>&nbsp;</span>
</a><script src=/js/lib/jquery/jquery.slim.min.js></script><script src=/js/lib/lazysizes/lazysizes.min.js></script><script src=/js/lib/smooth-scroll/smooth-scroll.polyfills.min.js></script><script>window.scroll=new SmoothScroll('[data-scroll]',{speed:300,speedAsDuration:true});</script><link rel=stylesheet href=/css/lib/katex/katex.min.css><script src=/js/lib/katex/katex.min.js></script><script defer src=/js/lib/katex/auto-render.min.js></script><link rel=stylesheet href=/css/lib/katex/copy-tex.min.css><script defer src=/js/lib/katex/copy-tex.min.js></script><script defer src=/js/lib/katex/mhchem.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:true},{left:"\\(",right:"\\)",display:false},{left:"\\[",right:"\\]",display:true},{left:"$",right:"$",display:false},]});});</script><script src=/js/blog.min.js></script></body></html>